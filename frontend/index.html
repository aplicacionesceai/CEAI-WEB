<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CEAI - √Årea de Innovaci√≥n y Competitividad</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- ‚úÖ SWIPER CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">

    <link rel="stylesheet" href="css/styles.css">
    <style>
        /* ========== SWIPER PERSONALIZADO ========== */
        .swiper-destacadas {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px 0;
        }

        .swiper-destacadas .swiper-slide {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .swiper-destacadas img {
            width: 100%;
            height: 280px;
            object-fit: cover;
        }

        .swiper-destacadas .card-body {
            padding: 1.5rem;
        }

        .swiper-destacadas .card-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.8rem;
            color: var(--ceai-azul);
        }

        .swiper-destacadas .badge {
            font-size: 0.85rem;
            padding: 0.4rem 0.8rem;
        }

        /* Botones de navegaci√≥n */
        .swiper-button-next,
        .swiper-button-prev {
            color: var(--ceai-verde) !important;
            background: white;
            width: 45px !important;
            height: 45px !important;
            border-radius: 50%;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .swiper-button-next:after,
        .swiper-button-prev:after {
            font-size: 20px !important;
        }

        /* Paginaci√≥n */
        .swiper-pagination-bullet {
            background: var(--ceai-verde) !important;
            opacity: 0.4;
        }

        .swiper-pagination-bullet-active {
            opacity: 1 !important;
        }

        .carousel-section {
            margin-bottom: 2rem;
        }

        .noticias-grid-section {
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 2px solid var(--ceai-verde);
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-ceai-dark sticky-top">
        <div class="container-fluid">

            <!-- ‚úÖ BRAND CON LOGO (NUEVO) -->
            <a class="navbar-brand fw-bold ceai-brand" href="index.html" aria-label="CEAI SENA - Ir al inicio">
                <img
                    class="ceai-brand__logo"
                    src="https://i.postimg.cc/cHpqyBX5/Logo-sena.jpg"
                    alt="Logo SENA"
                    loading="lazy"
                    decoding="async"
                >
               

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link active" href="index.html">Inicio</a></li>
                    <li class="nav-item"><a class="nav-link" href="innovacion.html">√Årea de Innovaci√≥n</a></li>
                    <li class="nav-item"><a class="nav-link" href="grupo-investigacion.html">Grupo de Investigaci√≥n</a></li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="semillerosDropdown" role="button" data-bs-toggle="dropdown">Semilleros</a>
                        <ul class="dropdown-menu" aria-labelledby="semillerosDropdown">
                            <li><a class="dropdown-item" href="semilleros.html">üìö Ver todos los semilleros</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><h6 class="dropdown-header">Por categor√≠a:</h6></li>
                            <li><a class="dropdown-item" href="semillero-detalle.html?categoria=Soluciones%20Digitales">üíª Soluciones Digitales</a></li>
                            <li><a class="dropdown-item" href="semillero-detalle.html?categoria=Automatizaci%C3%B3n%20e%20Instrumentaci%C3%B3n">ü§ñ Automatizaci√≥n e Instrumentaci√≥n</a></li>
                            <li><a class="dropdown-item" href="semillero-detalle.html?categoria=F%C3%A1brica%20Digital%20Interactiva">üè≠ F√°brica Digital Interactiva</a></li>
                            <li><a class="dropdown-item" href="semillero-detalle.html?categoria=Gesti%C3%B3n%20Energ%C3%A9tica">‚ö° Gesti√≥n Energ√©tica</a></li>
                            <li><a class="dropdown-item" href="semillero-detalle.html?categoria=IA%20Aplicada%20al%20Entorno">üß† IA Aplicada al Entorno</a></li>
                        </ul>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="servicios.html">Servicios</a></li>
                    <li class="nav-item"><a class="nav-link" href="aliados.html">Aliados</a></li>
                    <li class="nav-item"><a class="nav-link" href="contacto.html">Contacto</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <section class="hero-section text-white py-5" style="background: linear-gradient(135deg, var(--ceai-azul) 0%, var(--ceai-verde-oscuro) 100%);">
        <div class="container py-5">
            <div class="row align-items-center">
                <div class="col-lg-8">
                    <h1 class="display-4 fw-bold mb-3">Bienvenido al CEAI</h1>
                    <p class="lead mb-4">√Årea de Innovaci√≥n y Competitividad - SENA Regional Valle</p>
                    <p class="fs-5">Transformando ideas en soluciones tecnol√≥gicas para el ecosistema formativo y productivo.</p>
                    <a href="contacto.html" class="btn btn-ceai btn-lg mt-3">Cont√°ctanos</a>
                </div>
                <div class="col-lg-4 text-center d-none d-lg-block">
                    <div style="font-size: 120px; color: var(--ceai-verde);"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- ‚úÖ NUEVO CARRUSEL CON SWIPER -->
    <section class="py-5 carousel-section" id="seccionCarrusel" style="display: none;">
        <div class="container">
            <h2 class="mb-4 text-center" style="color: var(--ceai-azul); font-weight: 700;">üåü Noticias Destacadas</h2>

            <div class="swiper swiper-destacadas">
                <div class="swiper-wrapper" id="swiperNoticiasWrapper"></div>

                <!-- Botones de navegaci√≥n -->
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>

                <!-- Paginaci√≥n -->
                <div class="swiper-pagination"></div>
            </div>
        </div>
    </section>

    <section class="py-5 noticias-grid-section">
        <div class="container">
            <h2 class="mb-4 text-center" style="color: var(--ceai-azul); font-weight: 700;">üì∞ √öltimas Noticias y Eventos</h2>
            <div class="row" id="noticiasContainer"></div>
        </div>
    </section>

    <section class="py-5" style="background-color: #f8f9fa;">
        <div class="container">
            <h2 class="mb-4 text-center" style="color: var(--ceai-azul); font-weight: 700;">üå± Nuestros Semilleros de Investigaci√≥n</h2>
            <div class="row" id="semillerosContainer"></div>
            <div class="text-center mt-4">
                <a href="semilleros.html" class="btn btn-outline-primary btn-lg">Ver todos los semilleros</a>
            </div>
        </div>
    </section>

    <footer class="bg-ceai-dark text-white py-4 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-3">
                    <h5 style="color: var(--ceai-verde);">CEAI SENA</h5>
                    <p class="small">√Årea de Innovaci√≥n y Competitividad - Regional Valle</p>
                </div>
                <div class="col-md-4 mb-3">
                    <h6>Enlaces R√°pidos</h6>
                    <ul class="list-unstyled small">
                        <li><a href="index.html" class="text-white-50 text-decoration-none">Inicio</a></li>
                        <li><a href="contacto.html" class="text-white-50 text-decoration-none">Contacto</a></li>
                        <li><a href="#" class="text-white-50 text-decoration-none">Pol√≠tica de Privacidad</a></li>
                    </ul>
                </div>
                <div class="col-md-4 mb-3">
                    <h6>Enlaces Externos</h6>
                    <ul class="list-unstyled small">
                        <li><a href="https://www.sena.edu.co" target="_blank" class="text-white-50 text-decoration-none">SENA Colombia</a></li>
                        <li><a href="https://www.sena.edu.co/es-co/" target="_blank" class="text-white-50 text-decoration-none">Regional Valle</a></li>
                    </ul>
                </div>
            </div>
            <hr class="border-secondary">
            <p class="text-center small mb-0">&copy; 2026 CEAI SENA Regional Valle. Todos los derechos reservados.</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- ‚úÖ SWIPER JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <script>
        const API = 'https://ceai-web-production.up.railway.app';
        let swiperInstance = null;

        async function cargarNoticiasHome() {
            try {
                console.log('üîç Cargando noticias...');
                const res = await fetch(API + '/api/noticias');
                const allNoticias = await res.json();

                const destacadas = allNoticias.filter(n => n.destacada == 1);
                console.log('‚≠ê Destacadas encontradas:', destacadas.length);

                if (destacadas.length > 0) {
                    document.getElementById('seccionCarrusel').style.display = 'block';
                    cargarSwiperNoticias(destacadas);
                } else {
                    console.log('‚ö†Ô∏è No hay noticias destacadas');
                }

                cargarGrid(allNoticias);
            } catch (err) {
                console.error('‚ùå Error cargando noticias:', err);
            }
        }

        function cargarSwiperNoticias(noticias) {
            console.log('üé† Inicializando Swiper con', noticias.length, 'slides');

            const wrapper = document.getElementById('swiperNoticiasWrapper');
            let html = '';

            noticias.forEach(function(n) {
                const imagen = n.imagen || 'img/placeholder-noticia.jpg';
                const tipo = n.tipo || 'Noticia';
                const desc = (n.descripcion || '').substring(0, 150);
                const fecha = n.fecha || '';

                html += '<div class="swiper-slide">'
                    + '  <img src="' + imagen + '" alt="' + n.titulo + '">'
                    + '  <div class="card-body">'
                    + '    <div class="d-flex justify-content-between align-items-center mb-3">'
                    + '      <span class="badge bg-success">' + tipo + '</span>'
                    + '      <small class="text-muted">' + fecha + '</small>'
                    + '    </div>'
                    + '    <h5 class="card-title">' + n.titulo + '</h5>'
                    + '    <p class="card-text text-muted">' + desc + '...</p>'
                    + '  </div>'
                    + '</div>';
            });

            wrapper.innerHTML = html;

            // ‚úÖ Inicializar Swiper despu√©s de cargar el HTML
            setTimeout(function() {
                if (swiperInstance) {
                    swiperInstance.destroy(true, true);
                }

                swiperInstance = new Swiper('.swiper-destacadas', {
                    slidesPerView: 1,
                    spaceBetween: 30,
                    loop: true,
                    autoplay: {
                        delay: 4000,
                        disableOnInteraction: false,
                    },
                    pagination: {
                        el: '.swiper-pagination',
                        clickable: true,
                    },
                    navigation: {
                        nextEl: '.swiper-button-next',
                        prevEl: '.swiper-button-prev',
                    },
                });

                console.log('‚úÖ Swiper inicializado correctamente');
            }, 100);
        }

        function cargarGrid(noticias) {
            const container = document.getElementById('noticiasContainer');
            let html = '';

            const mostrar = noticias.slice(0, 6);

            mostrar.forEach(function(n) {
                const imagen = n.imagen || 'img/placeholder-noticia.jpg';
                const tipo = n.tipo || 'Noticia';
                const badgeClass = tipo === 'Evento' ? 'bg-info' : tipo === 'Convocatoria' ? 'bg-warning text-dark' : 'bg-secondary';

                html += '<div class="col-md-4 mb-4">'
                    + '  <div class="card h-100 shadow-sm">'
                    + '    <img src="' + imagen + '" class="card-img-top" style="height:200px;object-fit:cover;" alt="' + n.titulo + '">'
                    + '    <div class="card-body">'
                    + '      <span class="badge ' + badgeClass + ' mb-2">' + tipo + '</span>'
                    + '      <h5 class="card-title">' + n.titulo + '</h5>'
                    + '      <p class="card-text text-muted">' + (n.descripcion || '').substring(0, 100) + '...</p>'
                    + '    </div>'
                    + '  </div>'
                    + '</div>';
            });

            container.innerHTML = html;
        }

        async function cargarSemillerosInicio() {
            try {
                const res = await fetch(API + '/api/semilleros');
                const semilleros = await res.json();
                const container = document.getElementById('semillerosContainer');
                let html = '';

                const mostrar = semilleros.slice(0, 3);

                mostrar.forEach(function(s) {
                    html += '<div class="col-md-4 mb-4">'
                        + '  <div class="card h-100 shadow-sm">'
                        + '    <img src="' + (s.imagen || 'img/placeholder.jpg') + '" class="card-img-top" style="height:200px;object-fit:cover;" alt="' + s.nombre + '">'
                        + '    <div class="card-body">'
                        + '      <h5 class="card-title">' + s.nombre + '</h5>'
                        + '      <p class="card-text text-muted small">' + (s.linea || '') + '</p>'
                        + '      <a href="semillero-detalle.html?id=' + s.id + '" class="btn btn-ceai btn-sm w-100">Ver semillero</a>'
                        + '    </div>'
                        + '  </div>'
                        + '</div>';
                });

                container.innerHTML = html;
            } catch (err) {
                console.error('‚ùå Error cargando semilleros:', err);
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ P√°gina cargada');
            cargarNoticiasHome();
            cargarSemillerosInicio();
        });
    </script>

    <script src="/js/navbar.js"></script>
</body>
</html>
